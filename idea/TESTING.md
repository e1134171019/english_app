# 測試文檔

**最後更新**：2025-12-26  
**專案**：英文練習 App

本文檔整合了所有測試相關的規格、策略與操作指南。

---

## 目錄
1. [測試策略](#測試策略)
2. [測試規格](#測試規格)
3. [手動測試清單](#手動測試清單)
4. [快速測試指南](#快速測試指南)
5. [自動化測試](#自動化測試)

---

## 測試策略

### 測試金字塔

```
      /\
     /E2E\        ← 少量端到端測試
    /------\
   /整合測試 \     ← 中等數量整合測試
  /----------\
 / 單元測試    \   ← 大量單元測試（目標 80% 覆蓋率）
/--------------\
```

### 測試類型

| 測試類型 | 工具 | 覆蓋範圍 | 優先級 |
|----------|------|----------|--------|
| 單元測試 | Vitest | Services, Utils | ⭐⭐⭐ 高 |
| 整合測試 | Vitest + jsdom | Controller + Service | ⭐⭐ 中 |
| E2E 測試 | 手動或 Playwright | 完整使用流程 | ⭐ 低 |

### 測試環境

- **單元測試**: Vitest + jsdom (模擬 DOM)
- **瀏覽器測試**: 手動測試 + http://localhost:8085
- **CI/CD**: 未來規劃

---

## 測試規格

### TS-01: 導航系統

**測試目標**: 驗證層級選單導航邏輯

**測試步驟**:
1. 選擇學制（JH / SH / ADV）
2. 選擇等級（Level 1-5）
3. 點擊「開始」

**預期結果**:
- ✅ 正確進入練習畫面
- ✅ 載入對應等級的單字
- ✅ 顯示正確的卡片內容

**測試數據**:
- JH_1: 國中一年級單字
- SH_3: 高中三年級單字

---

### TS-02: 資料完整性

**測試目標**: 驗證單字資料結構完整

**檢查項目**:
```javascript
word = {
  english: "✅ 必須有",
  translation: "✅ 必須有",
  exampleEn: "✅ 必須有",
  exampleZh: "✅ 必須有",
  pos: "✅ 詞性",
  verb: "⚠️ 動詞才有",
  synonyms: "⚠️ 選填"
}
```

**驗證方法**:
- 單元測試: `wordService.normalizeWord()`
- 手動抽查: 隨機抽取 10 個單字檢查

---

### TS-03: 單字練習模式

**功能清單**:
- [x] 翻卡互動（點擊翻面）
- [x] 例句顯示（英/中分區）
- [x] TTS 語音朗讀
- [x] 點擊單字即時翻譯
- [x] 相關詞水平排列
- [x] 左右箭頭切換卡片

**測試案例**:

| 測試 ID | 操作 | 預期結果 |
|---------|------|----------|
| FC-001 | 點擊卡片正面 | 翻轉顯示背面 |
| FC-002 | 點擊大喇叭 | 朗讀單字 |
| FC-003 | 點擊小喇叭 | 朗讀例句 |
| FC-004 | 點擊例句中的單字 | 顯示翻譯 tooltip |
| FC-005 | 點擊右箭頭 | 切換到下一張卡片 |
| FC-006 | 點擊左箭頭 | 切換到上一張卡片 |

---

### TS-04: 聽力練習模式

**功能清單**:
- [x] 自動播放單字發音
- [x] 輸入拼字
- [x] 答案驗證
- [x] 即時回饋

**測試案例**:

| 測試 ID | 輸入 | 正確答案 | 預期結果 |
|---------|------|----------|----------|
| QZ-001 | apple | apple | ✅ 正確（綠色） |
| QZ-002 | aple | apple | ❌ 錯誤（紅色） |
| QZ-003 | APPLE | apple | ✅ 正確（不區分大小寫） |

---

### TS-13: 動詞三態

**功能清單**:
- [x] 顯示動詞原型
- [x] 輸入過去式/過去分詞
- [x] 答案驗證
- [x] 統計正確率

**測試案例**:

| Base | Past | PP | 輸入測試 |
|------|------|----|----------|
| go | went | gone | 驗證正確 |
| eat | ate | eaten | 驗證正確 |
| be | was/were | been | 多重答案 |

---

### TS-18: 自訂題庫

**功能清單**:
- [x] 輸入單字列表
- [x] 建立題庫
- [x] 選擇練習模式
- [x] 刪除題庫

**測試案例**:

| 測試 ID | 操作 | 預期結果 |
|---------|------|----------|
| CD-001 | 輸入 "apple banana" | 成功建立 2 個單字的題庫 |
| CD-002 | 輸入 "xyz123" | 顯示無效單字提示 |
| CD-003 | 點擊刪除按鈕 | 彈出確認對話框 |
| CD-004 | 確認刪除 | 題庫從列表移除 |

---

## 手動測試清單

### 前置條件

- [x] HTTP Server 運行中 (`python -m http.server 8085`)
- [x] 瀏覽器已清除快取
- [x] 確認 URL: `http://localhost:8085/new_index.html`

---

### 測試流程

#### 1. 首頁載入

- [ ] 開啟 `http://localhost:8085/new_index.html`
- [ ] 確認首頁正常顯示
- [ ] 確認底部導航欄可見
- [ ] 確認 6 個功能按鈕可見

**預期結果**:
- ✅ 頁面載入完成
- ✅ 無 Console 錯誤
- ✅ 所有元素正常顯示

---

#### 2. 單字練習流程

**步驟**:
1. 點擊「單字練習」
2. 選擇「國中」
3. 選擇「Level 1」
4. 點擊「開始」
5. 點擊卡片翻面
6. 點擊大喇叭（單字發音）
7. 點擊小喇叭（例句發音）
8. 點擊例句中的單字
9. 點擊右箭頭（下一張）
10. 點擊左箭頭（上一張）

**檢查點**:
- [ ] 卡片顯示中文
- [ ] 翻面顯示英文、音標、例句
- [ ] 語音朗讀正常
- [ ] Tooltip 翻譯顯示
- [ ] 卡片切換正常
- [ ] 進度條更新

---

#### 3. 聽力練習流程

**步驟**:
1. 點擊「聽力練習」
2. 選擇等級
3. 聽音後輸入單字
4. 點擊「送出」
5. 檢查結果

**檢查點**:
- [ ] 自動播放發音
- [ ] 輸入框可用
- [ ] 答案驗證正確
- [ ] 顯示正確/錯誤回饋

---

#### 4. 自訂題庫流程

**步驟**:
1. 點擊「我的專屬」
2. 輸入 "apple banana orange"
3. 點擊「單字練習」
4. 驗證卡片顯示
5. 返回並點擊刪除按鈕
6. 確認刪除

**檢查點**:
- [ ] 題庫建立成功
- [ ] 單字卡正確顯示
- [ ] 刪除確認對話框出現
- [ ] 題庫成功刪除

---

### RWD 測試

**測試視窗大小**:
- [ ] 手機 (390 x 844)
- [ ] 平板 (768 x 1024)
- [ ] 桌面 (1440 x 900)

**檢查項目**:
- [ ] 卡片尺寸自適應
- [ ] 文字大小適當
- [ ] 按鈕可點擊
- [ ] 無元素溢出

---

## 快速測試指南

### 5 分鐘快速驗證

```bash
# 1. 啟動伺服器
python -m http.server 8085

# 2. 開啟瀏覽器
http://localhost:8085/new_index.html

# 3. 快速測試（每項 30 秒）
□ 首頁載入正常
□ 單字練習可用
□ 聽力測驗可用
□ 自訂題庫可用
□ 刪除功能正常
□ 無 Console 錯誤
```

### 關鍵功能檢查

**必測項目**:
1. ✅ 翻卡互動
2. ✅ TTS 語音
3. ✅ 左右導航
4. ✅ 自訂題庫建立
5. ✅ 刪除確認對話框

**常見問題**:
- 快取問題 → `Ctrl + Shift + R` 硬重新整理
- 語音無聲 → 檢查瀏覽器音量
- 卡片空白 → 檢查 Console 錯誤

---

## 自動化測試

### 單元測試

**執行方式**:
```bash
npm test                # 執行所有測試
npm run test:ui         # UI 模式
npm run test:coverage   # 覆蓋率報告
```

**測試文件結構**:
```
tests/
├── unit/
│   ├── wordService.test.js
│   ├── wordService.token.test.js
│   ├── tooltipManager.test.js
│   └── tooltipManager.timeout.test.js
└── fixtures/
    └── testWords.json
```

### 覆蓋率目標

| 模組 | 目標 | 當前 |
|------|------|------|
| wordService.js | 80% | ✅ 達成 |
| TooltipManager.js | 80% | ✅ 達成 |
| DeckService.js | 70% | ⏳ 進行中 |
| Controllers | 60% | ⏳ 規劃中 |

---

## 測試記錄

### 最近測試結果

| 日期 | 測試者 | 通過率 | 備註 |
|------|--------|--------|------|
| 2025-12-26 | AI | 90% | 導航按鈕修復中 |
| 2025-12-16 | AI | 85% | Tooltip 功能完成 |
| 2025-12-14 | AI | 80% | 基礎功能穩定 |

---

## 已知問題

### 待修復
1. ⏳ 導航按鈕（左右箭頭）在自訂模式下無效
2. ⏳ 刪除確認對話框偶爾不出現

### 已修復
1. ✅ 翻卡動畫延遲問題
2. ✅ Tooltip 定位錯誤
3. ✅ 例句分區顯示

---

**測試文檔整合完成** ✅  
*原始文件: test_specification.md, testing_strategy.md, manual_test_checklist.md, test_checklist.md, quick_test_guide.md*
